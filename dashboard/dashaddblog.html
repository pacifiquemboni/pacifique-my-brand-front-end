<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" href="images/me.jpg">
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="dashcss.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Iceland"
    />
    <title>Dash Blogs</title>
    <script src="../validate.js"></script>

    <script src="addblog.js" defer></script>
  </head>
  <body onload="fetchBlogs()">
    <div id="body">
      <header>
        <input type="checkbox" name="" id="check" />
        <label for="check">
          <img src="./bar.png" alt="" id="menubtn" style="width: 50px" />
          <img src="./x.png" alt="" id="menucancel" style="width: 20px" />
        </label>
        <div class="sidebar">
          <header>Dashboard</header>
          <ul>
            <li class="active">
              <a href="dashaddblog.html"
                ><img
                  width="64"
                  height="64"
                  src="https://img.icons8.com/hatch/64/FFFFFF/add.png"
                  alt="add"
                />
                New Blog</a
              >
            </li>
            <li>
              <a href="projectspage.html"
                ><img
                  width="24"
                  height="24"
                  src="https://img.icons8.com/material/24/FFFFFF/view-quilt.png"
                  alt="view-quilt"
                />
                Projects</a
              >
            </li>
            <li>
              <a href="stats.html"
                ><img
                  width="32"
                  height="32"
                  src="https://img.icons8.com/external-anggara-glyph-anggara-putra/32/FFFFFF/external-statistic-user-interface-anggara-glyph-anggara-putra.png"
                  alt="external-statistic-user-interface-anggara-glyph-anggara-putra"
                />
                Statatistics</a
              >
            </li>
            <li>
              <a href="users.html"
                ><img
                  width="48"
                  height="48"
                  src="https://img.icons8.com/pulsar-line/48/FFFFFF/group.png"
                  alt="group"
                />
                Users</a
              >
            </li>
            <li>
              <a href="messages.html"
                ><img
                  width="50"
                  height="50"
                  src="https://img.icons8.com/ios/50/FFFFFF/message-group.png"
                  alt="message-group"
                />
                Messages</a
              >
            </li>
            <li>
              <a href="../index.html"
                ><img
                  width="26"
                  height="26"
                  src="https://img.icons8.com/metro/26/FFFFFF/home.png"
                  alt="home"
                />Home</a
              >
            </li>
          </ul>
          <li>
            <a href="#" class="logout" onclick="logout()">
              <img
                width="50"
                height="50"
                src="https://img.icons8.com/ios-filled/50/FA5252/logout-rounded.png"
                alt="logout-rounded"
              />
              <span class="nav-item">logout</span>
            </a>
          </li>
        </div>
      </header>
      <script>
        const logout = () => {
          // Clear the authentication token from local storage
          localStorage.removeItem("token");
          localStorage.removeItem("Role");
          // Redirect the user to the login page or update UI to reflect logged out state
          // For example, you can redirect to the login page
          window.location.href = "../login.html"; // Change the URL to your login page
        };
      </script>
      <!-- <div id="section-header">
        <div id="dashbar">
          <div id="adminname">pacifiquemboni</div>
        <img
                  width="30"
                  height="30"
                  src="https://img.icons8.com/pulsar-line/48/FFFFFF/group.png"
                  alt="group"
                />
        <img
                  width="30"
                  height="30"
                  src="https://img.icons8.com/ios/50/FFFFFF/message-group.png"
                  alt="message-group"
                />
        </div>
        
      </div> -->
      <div id="section">
        <div class="dash-main">
          <div class="dash-form">
            <div
              id="toastNotificationerro"
              class="toast hidden"
              style="
                background-color: #dc3545;
                height: 50px;
                text-align: center;
              "
            ></div>
            <div class="login-form">
              <form id="blogform" class="blogform1">
                <div id="toastNotification" class="toast hidden"></div>

                <div class="heading">
                  <h1>Add New Blog</h1>
                </div>
                <div id="success"></div>
                <label for="message">Blog Title :</label>
                <input
                  type="text"
                  placeholder="Enter Blog Title"
                  id="blogTitle"
                />
                <label for="message">Blog intro :</label>
                <input
                  type="text"
                  placeholder="Enter Blog Intoduction"
                  id="blogIntro"
                />
                <div id="blogTitleError"></div>
                <label for="message">Blog Body :</label>
                <!-- <input type="text" id="dash-textarea"> -->
                <textarea
                  placeholder="blog body"
                  id="dashtextarea"
                  class="dash-textarea"
                ></textarea>

                <input
                  type="text"
                  placeholder="image url"
                  id="blogImage"
                  hidden
                />
                <div id="uploadImage" style="color: green"></div>
                <div id="my-editor"></div>

                <div id="dashBodyError"></div>
                <!-- <div
                  id="toastNotification"
                  class="toast hidden"
                 
                ></div> -->
                <div class="dash-btn">
                  <form
                    id="imageForm"
                    class="fileupload"
                    enctype="multipart/form-data"
                  >
                    <img src="../images/formicon/Upload.png" />
                    <input
                      type="file"
                      id="imageInput"
                      name="image"
                      accept="image/*"
                      onchange="handleFileChange() "
                    />

                    <button type="button" onclick="imageUpload()">
                      Upload Image
                    </button>
                  </form>
                  <button
                    type="submit"
                    value="submit"
                    id="postbtn"
                    style="display: none"
                  >
                    PostBlog
                  </button>
                </div>
              </form>
            </div>
          </div>
          <div class="dash-right">
            <div class="heading">
              <h3>Image Preview</h3>
            </div>
            <img id="previewImage" />
          </div>

          <div id="confirmationModal" class="modal">
            <div class="modal-content">
              <p>Are you sure you want to delete this project?</p>
              <button id="confirmButton">Confirm</button>
              <button id="cancelButton">Cancel</button>
            </div>
          </div>

          <div id="blog-table">
            <button type="button" id="addblogbtn" onclick="create()">
              <img
                width="14"
                height="14"
                src="https://img.icons8.com/hatch/64/FFFFFF/add.png"
              />
              Add Blog
            </button>
            <br /><br />
            <div class="heading">
              <h1>Added blogs:</h1>
            </div>
            <table>
              <thead>
                <th class="image blogimg" >Image</th>
                <th>Blog Title</th>
                <th>Blog Author</th>
                <th>Blog Introduction</th>
                <!-- <th>Blog Body</th> -->
                <th>Action</th>
              </thead>
              <tbody id="blogdata_table"></tbody>
            </table>
            <div id="blogmessage"></div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    function handleFileChange() {
      var fileInput = document.getElementById("imageInput");
      var previewImage = document.getElementById("previewImage");

      if (fileInput && fileInput.files && fileInput.files.length > 0) {
        var selectedFile = fileInput.files[0];

        // Read the file as a Data URL (Base64 encoded)
        var reader = new FileReader();

        reader.onload = function (e) {
          // Display the preview image
          previewImage.src = e.target.result;
          previewImage.style.display = "block";

          // Save the Base64 data to localStorage
          localStorage.setItem("imageData", e.target.result);
        };

        reader.readAsDataURL(selectedFile);
      } else {
        console.log("No file selected");
      }
    }

    // You can load the image data from localStorage on page load if needed
    var imageDataFromStorage = localStorage.getItem("imageData");
    if (imageDataFromStorage) {
      var previewImage = document.getElementById("previewImage");
      previewImage.src = imageDataFromStorage;
      previewImage.style.display = "block";
    }
  </script>
</html>
